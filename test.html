<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text-to-Speech with Highlight</title>
    <style>
        .highlight {
            background-color: yellow;
        }
    </style>
</head>
<body>
    <p id="text">
        Hello world, this is an example of synchronized text highlighting with text-to-speech.
    </p>
    <button onclick="speakText()">Speak</button>

    <script>
        function speakText() {
            const textElement = document.getElementById("text");
            const text = textElement.innerText;
            const words = text.split(" ");
            const utterance = new SpeechSynthesisUtterance(text);

            // Get speech synthesis instance
            const synth = window.speechSynthesis;

            // Set up a word boundary event listener
            utterance.onboundary = function (event) {
                if (event.name === "word") {
                    const wordIndex = event.charIndex;
                    highlightWord(wordIndex);
                }
            };

            // Function to highlight the current word
            function highlightWord(charIndex) {
                let highlightedText = "";
                let currentCharIndex = 0;

                for (let word of words) {
                    const wordLength = word.length + 1; // Including space
                    if (currentCharIndex <= charIndex && charIndex < currentCharIndex + wordLength) {
                        highlightedText += `<span class="highlight">${word}</span> `;
                    } else {
                        highlightedText += `${word} `;
                    }
                    currentCharIndex += wordLength;
                }

                textElement.innerHTML = highlightedText.trim();
            }

            // Speak the text
            synth.speak(utterance);
        }
    </
